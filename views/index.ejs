<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Grimoire - Liste</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <a href="/" class="back-link">‚Üê Retour Accueil</a>
    <h1>üìú Liste des Objets</h1>
    
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Chercher un objet..." onkeyup="filterItems()">
    </div>

    <ul id="itemList">
        <% items.forEach(item => { %>
            <li class="item-card">
                <a href="/item/<%= item.index %>"><%= item.name %></a>
                <button class="fav-btn" onclick="addFav('<%= item.index %>')">‚≠ê</button>
            </li>
        <% }); %>
    </ul>

    <script>
        function filterItems() {
            let input = document.getElementById('searchInput').value.toLowerCase();
            let cards = document.querySelectorAll('.item-card');
            cards.forEach(card => {
                let name = card.querySelector('a').innerText.toLowerCase();
                card.style.display = name.includes(input) ? "flex" : "none";
            });
        }

        async function addFav(index) {
            const res = await fetch(`/api/favorites/${index}`, { method: 'POST' });
            if(res.ok) alert("Ajout√© aux favoris !");
        }
    </script>
</body>
</html>